
Display is a 512x392 virtual FrameBuffer.  
The visible region is a window(480x360 or 240x180) into FrameBuffer



Mode 0: is a mode using a single byte pixel data and a single byte colour data to generate a 3x3 block in any two of 16 colours.

 
 
Display_port_start = 0x40 ; display ports are write only.  
 
FrameBuffer_Control  +00   Generate Display  
	Write Value
	0x00 = Show Lowres display  (240x160)
	0x01 = Show Highres display (480x360);
	0x71 = blit 8 pixels per byte
	0x72 = blit 4 pixels per byte
	0x73 = blit 3 pixels per byte
	0x74 = blit 2 pixels per byte
	0x80 = Generate Mode 0   (fill framebuffer with 1.777bit per pixel data ( 16 bits per 9 pixels) )
	0x81 = Generate Mode 1   (fill framebuffer with tile map )
			
 
 displayShift  +01  default 0    framebuffer view offset  xxxxyyyy 
	
 serialPixelAddress_L +02
 serialPixelAddress_M +03
 serialPixelAddress_H,+04    virtual frameBuffer serial pixel write address.  0x000000-0x031000 
 
 serialPixelSet,+05   frameBuffer set         pixel=palette[v],   serialPixelAddress+=1
 serialPixelMul,+06   frameBuffer multiply    pixel.rgb=(pixel.rgb*palette[v].rgb) >> 8  (does not advance address)
 serialPixelAdd,+07   frameBuffer add         pixel.rgb+=palette[v].rgb,  serialPixelAddress+=1 (clamped add)
 

Mode_port_start = Display_port_start + 0x08

 mode0_PixelData_displayStart_L  +00
 mode0_PixelData_displayStart_H  +01  default 0x4000;
 mode0_ColorData_displayStart_L  +02  
 mode0_ColorData_displayStart_H  +03  default 0x4001;

 mode0_PixelData_increment +04 default 2;
 mode0_ColorData_increment +05 default 2;
  	
 mode0_PixelData_lineIncrement +06 default 64    pixel data bytes per line vvvvvvvv000  (v<<3)
 mode0_ColorData_lineIncrement +07 default 64    pixel data bytes per line vvvvvvvv000  (v<<3)
	

 mode1_tile_image_start_L +00;
 mode1_tile_image_start_H +01;   tile data is 256 * 8x8 *2bit =   4096 bytes
 mode1_map_Data_start_L +02;
 mode1_map_Data_start_H +03;	tile map entries are 2 bytes per tile  
 mode1_Map_Data_lineIncrement+04;   map data bytes per line vvvvvvvv000  (v<<3)
 mode1_palettes_start_L +05;     Palettes are 16 * 4 * 4bit entries = 32 bytes
 mode1_palettes_start_H +06; 
 mode1_shift +07;   xxxxyyyy
 
 
 
blit_port_start = Display_port_start + 0x08   ;  this is the same port space as the mode ports 
 blit_ImageData_L +00
 blit_ImageData_H +01
 blit_ImageBytesWide + 02
 blit_ImageHeight +3
 blit_ImageData_LineIncrement +04
 blit_PaletteData_L +5
 blit_PaletteData_H +6
 blit_Flags +7           FlipX, FlipY, DoubleX, DoubleY   4 bits reserved 
 
   
 
 input base = 0x48  ; the read only inputs share addresses with the display output ports. 
 button_state_0 + 0  Left Up Right Down Enter Esc Ctrl Shift  
 button_state_1 + 1  A W D S SPACE (Mouse1/Z) (Mouse2/X (Mouse3/BackSpace)
 mouseX +2
 mouseY +3
 ticker +4   increments on each frame of host device.
 timer  +5   increments once per second 
 console + 6  buffers a few chars. reads as zero when buffer is empty. reading the port removes the item from the buffer.
 
 
 
 
 
 
 